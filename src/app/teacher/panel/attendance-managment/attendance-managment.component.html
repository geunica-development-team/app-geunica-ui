<div class="container py-4">

  <!-- 1. Fila del buscador -->
  <div class="row mb-4">
    <div class="col-12 col-md-6">
      <app-searcher
        [(term)]="searchTerm"
        placeholder="Buscar por curso"
        field="title"
        (search)="onSearch()"
      ></app-searcher>
    </div>
  </div>

  <!-- 2. Fila de las cards -->
      
  <div class="row g-4">
    <div class="col-12 col-sm-6 col-md-4 col-lg-3" *ngFor="let g of filteredGrades">
        <app-card-courses class="h-100"
          [etiquetaTitulo]="'GRADO'" 
          [titulo]="g.grado"
          [etiquetaSubtitulo1]="'NIVEL'"
          [subtitulo1]="g.nivel"
          [etiquetaSubtitulo2]="'SECCIÓN'"
          [subtitulo2]="g.seccion"
          (click)="openModalAttendanceManagment(g)"         
          style="cursor: pointer;">
          
          <!-- '/student/panel/courses', course.id_curso, 'curriculum' -->
          <!-- el link tenemos que cambiarlo, lo mejor seria crear un curriculum para profesor -->

        </app-card-courses>

    </div>
  </div>
</div>

<!-- Modal reutilizable -->
<app-app-modal
  [visible]="!!selectedGrade" 
  (closed)="closeModal()"
  width="600px"
  maxWidth="90vw"
  borderRadius="0.75rem"
>
  <ng-container *ngIf="selectedGrade">
    <div class="p-4">

      <!-- 1) Título -->
      <h4 class="mb-3 text-center">
        {{ selectedGrade.nivel }} – {{ selectedGrade.grado }} 
        <small class="text-muted">({{ selectedGrade.seccion }})</small>
      </h4>
      <hr/>

      <!-- Tabla de meses -->
      <div class="table-responsive ">
        <div class="d-flex justify-content-center">
          <table class="table table-sm custom-table " style="width: 80%; max-width: 300px;">
            <thead class="table-success ">
              <tr>
                <th scope="col" class="fw-bold">Mes</th>
                <th scope="col" class="fw-bold">Concepto</th>
              </tr>
            </thead>
            <tbody>
              <tr         
                *ngFor="let month of attendance?.months" 
                class="clickable-row" 
                (click)="openAttendanceList(selectedGrade!.id_salon!, month.month)">
                <td>{{ month.month }}</td>
                <td>
                  {{ isMonthComplete(month) ? 'Completado' : 'En progreso' }}
                </td>
              </tr>
            </tbody>
          </table>
        </div>


      </div>


    </div>
  </ng-container>
</app-app-modal>
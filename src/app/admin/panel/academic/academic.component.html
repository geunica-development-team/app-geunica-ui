<div class="user-form-container">
  <div class="form-header">
    <h2 class="form-title">Información detallada de usuario</h2>
    <p class="form-subtitle">Complete todos los campos requeridos para crear o actualizar el usuario</p>
  </div>
  
  <form [formGroup]="userForm" (ngSubmit)="onSubmit()" class="user-form">
    <!-- Datos Personales -->
    <div class="form-section">
      <h3 class="section-title">
        <i class="fas fa-user me-2"></i>
        Datos Personales
      </h3>
      
      <div class="row g-3">
        <div class="col-md-4">
          <label for="firstName" class="form-label">Nombres *</label>
          <input 
            type="text" 
            class="form-control"
            [class.is-invalid]="isFieldInvalid('firstName')"
            id="firstName" 
            formControlName="firstName"
            placeholder="Ingrese los nombres">
          @if (isFieldInvalid('firstName')) {
            <div class="invalid-feedback">
              {{ getFieldError('firstName') }}
            </div>
          }
        </div>
        
        <div class="col-md-4">
          <label for="paternalLastName" class="form-label">Apellido Paterno *</label>
          <input 
            type="text" 
            class="form-control"
            [class.is-invalid]="isFieldInvalid('paternalLastName')"
            id="paternalLastName" 
            formControlName="paternalLastName"
            placeholder="Apellido paterno">
          @if (isFieldInvalid('paternalLastName')) {
            <div class="invalid-feedback">
              {{ getFieldError('paternalLastName') }}
            </div>
          }
        </div>
        
        <div class="col-md-4">
          <label for="maternalLastName" class="form-label">Apellido Materno *</label>
          <input 
            type="text" 
            class="form-control"
            [class.is-invalid]="isFieldInvalid('maternalLastName')"
            id="maternalLastName" 
            formControlName="maternalLastName"
            placeholder="Apellido materno">
          @if (isFieldInvalid('maternalLastName')) {
            <div class="invalid-feedback">
              {{ getFieldError('maternalLastName') }}
            </div>
          }
        </div>
      </div>
      
      <div class="row g-3 mt-2">
        <div class="col-md-3">
          <label for="documentType" class="form-label">Tipo de Documento *</label>
          <select 
            class="form-select"
            [class.is-invalid]="isFieldInvalid('documentType')"
            id="documentType" 
            formControlName="documentType">
            @for (docType of documentTypes; track docType.value) {
              <option [value]="docType.value">{{ docType.label }}</option>
            }
          </select>
        </div>
        
        <div class="col-md-3">
          <label for="documentNumber" class="form-label">N° Documento *</label>
          <input 
            type="text" 
            class="form-control"
            [class.is-invalid]="isFieldInvalid('documentNumber')"
            id="documentNumber" 
            formControlName="documentNumber"
            placeholder="Número de documento">
          @if (isFieldInvalid('documentNumber')) {
            <div class="invalid-feedback">
              {{ getFieldError('documentNumber') }}
            </div>
          }
        </div>
        
        <div class="col-md-3">
          <label for="birthDate" class="form-label">Fecha de Nacimiento *</label>
          <input 
            type="date" 
            class="form-control"
            [class.is-invalid]="isFieldInvalid('birthDate')"
            id="birthDate" 
            formControlName="birthDate">
          @if (isFieldInvalid('birthDate')) {
            <div class="invalid-feedback">
              {{ getFieldError('birthDate') }}
            </div>
          }
        </div>
        
        <div class="col-md-3">
          <label for="gender" class="form-label">Sexo *</label>
          <select 
            class="form-select"
            [class.is-invalid]="isFieldInvalid('gender')"
            id="gender" 
            formControlName="gender">
            <option value="">Seleccionar</option>
            @for (gender of genderOptions; track gender.value) {
              <option [value]="gender.value">{{ gender.label }}</option>
            }
          </select>
        </div>
      </div>
      
      <div class="row g-3 mt-2">
        <div class="col-md-4">
          <label for="phone" class="form-label">Celular *</label>
          <input 
            type="tel" 
            class="form-control"
            [class.is-invalid]="isFieldInvalid('phone')"
            id="phone" 
            formControlName="phone"
            placeholder="999 999 999">
          @if (isFieldInvalid('phone')) {
            <div class="invalid-feedback">
              {{ getFieldError('phone') }}
            </div>
          }
        </div>
        
        <div class="col-md-4">
          <label for="address" class="form-label">Dirección *</label>
          <input 
            type="text" 
            class="form-control"
            [class.is-invalid]="isFieldInvalid('address')"
            id="address" 
            formControlName="address"
            placeholder="Dirección completa">
          @if (isFieldInvalid('address')) {
            <div class="invalid-feedback">
              {{ getFieldError('address') }}
            </div>
          }
        </div>
        
        <div class="col-md-4">
          <label for="personalEmail" class="form-label">Correo Personal *</label>
          <input 
            type="email" 
            class="form-control"
            [class.is-invalid]="isFieldInvalid('personalEmail')"
            id="personalEmail" 
            formControlName="personalEmail"
            placeholder="correo@ejemplo.com">
          @if (isFieldInvalid('personalEmail')) {
            <div class="invalid-feedback">
              {{ getFieldError('personalEmail') }}
            </div>
          }
        </div>
      </div>
    </div>
    
    <!-- Cuenta de Usuario -->
    <div class="form-section">
      <h3 class="section-title">
        <i class="fas fa-key me-2"></i>
        Cuenta de Usuario
      </h3>
      
      <div class="row g-3">
        <div class="col-md-6">
          <label for="loginEmail" class="form-label">Email (para login) *</label>
          <input 
            type="email" 
            class="form-control"
            [class.is-invalid]="isFieldInvalid('loginEmail')"
            id="loginEmail" 
            formControlName="loginEmail"
            placeholder="usuario@colegio.edu">
          @if (isFieldInvalid('loginEmail')) {
            <div class="invalid-feedback">
              {{ getFieldError('loginEmail') }}
            </div>
          }
        </div>
        
        <div class="col-md-6">
          <label for="password" class="form-label">
            Contraseña 
            @if (isEditMode) {
              <small class="text-muted">(dejar vacío para mantener actual)</small>
            } @else {
              <span class="text-danger">*</span>
            }
          </label>
          <input 
            type="password" 
            class="form-control"
            id="password" 
            formControlName="password"
            placeholder="Contraseña segura">
        </div>
      </div>
      
      <div class="row g-3 mt-2">
        <div class="col-md-6">
          <label for="accountStatus" class="form-label">Estado de la Cuenta *</label>
          <select 
            class="form-select"
            id="accountStatus" 
            formControlName="accountStatus">
            @for (status of statusOptions; track status.value) {
              <option [value]="status.value">{{ status.label }}</option>
            }
          </select>
        </div>
        
        <div class="col-md-6">
          <label for="lastLogin" class="form-label">Último Login</label>
          <input 
            type="text" 
            class="form-control"
            id="lastLogin" 
            formControlName="lastLogin"
            placeholder="Nunca ha iniciado sesión"
            readonly>
        </div>
      </div>
    </div>
    
    <!-- Rol del Usuario -->
    <div class="form-section">
      <h3 class="section-title">
        <i class="fas fa-user-tag me-2"></i>
        Rol del Usuario
      </h3>
      
      <div class="row g-3">
        <div class="col-md-6">
          <label for="role" class="form-label">Rol *</label>
          <select 
            class="form-select"
            [class.is-invalid]="isFieldInvalid('role')"
            id="role" 
            formControlName="role">
            @for (role of userRoles; track role.value) {
              <option [value]="role.value">{{ role.label }}</option>
            }
          </select>
        </div>
        
        <div class="col-md-6">
          <label for="roleDescription" class="form-label">Descripción del Rol</label>
          <textarea 
            class="form-control"
            id="roleDescription" 
            formControlName="roleDescription"
            rows="3"
            readonly></textarea>
        </div>
      </div>
    </div>
    
    <!-- Campos específicos para Estudiante -->
    @if (isStudent) {
      <div class="form-section">
        <h3 class="section-title">
          <i class="fas fa-graduation-cap me-2"></i>
          Información de Estudiante
        </h3>
        
        <div class="row g-3">
          <div class="col-md-4">
            <label for="studentCode" class="form-label">Código de Estudiante *</label>
            <div class="input-group">
              <input 
                type="text" 
                class="form-control"
                [class.is-invalid]="isFieldInvalid('studentCode')"
                id="studentCode" 
                formControlName="studentCode"
                placeholder="EST20240001">
              <button 
                type="button" 
                class="btn btn-outline-secondary"
                (click)="generateStudentCode()"
                title="Generar código automático">
                <i class="fas fa-magic"></i>
              </button>
            </div>
            @if (isFieldInvalid('studentCode')) {
              <div class="invalid-feedback">
                {{ getFieldError('studentCode') }}
              </div>
            }
          </div>
          
          <div class="col-md-4">
            <label for="enrollmentDate" class="form-label">Fecha de Ingreso *</label>
            <input 
              type="date" 
              class="form-control"
              [class.is-invalid]="isFieldInvalid('enrollmentDate')"
              id="enrollmentDate" 
              formControlName="enrollmentDate">
            @if (isFieldInvalid('enrollmentDate')) {
              <div class="invalid-feedback">
                {{ getFieldError('enrollmentDate') }}
              </div>
            }
          </div>
          
          <div class="col-md-4">
            <label for="studentStatus" class="form-label">Estado del Estudiante *</label>
            <select 
              class="form-select"
              id="studentStatus" 
              formControlName="studentStatus">
              @for (status of statusOptions; track status.value) {
                <option [value]="status.value">{{ status.label }}</option>
              }
            </select>
          </div>
        </div>
      </div>
    }
    
    <!-- Campos específicos para Docente -->
    @if (isTeacher) {
      <div class="form-section">
        <h3 class="section-title">
          <i class="fas fa-chalkboard-teacher me-2"></i>
          Información de Docente
        </h3>
        
        <div class="row g-3">
          <div class="col-md-6">
            <label for="specialty" class="form-label">Especialidad *</label>
            <select 
              class="form-select"
              [class.is-invalid]="isFieldInvalid('specialty')"
              id="specialty" 
              formControlName="specialty">
              <option value="">Seleccionar especialidad</option>
              @for (specialty of specialties; track specialty) {
                <option [value]="specialty">{{ specialty }}</option>
              }
            </select>
            @if (isFieldInvalid('specialty')) {
              <div class="invalid-feedback">
                {{ getFieldError('specialty') }}
              </div>
            }
          </div>
        </div>
      </div>
    }
    
    <!-- Botones de acción -->
    <div class="form-actions">
      <button 
        type="button" 
        class="btn btn-outline-secondary me-3"
        (click)="onCancel()">
        <i class="fas fa-times me-2"></i>
        Cancelar
      </button>
      <button 
        type="submit" 
        class="btn btn-primary"
        [disabled]="userForm.invalid">
        <i class="fas fa-save me-2"></i>
        {{ isEditMode ? 'Actualizar Usuario' : 'Crear Usuario' }}
      </button>
    </div>
  </form>
</div>


<h2>Soporte de Tickets</h2>

  <ul>
    <li>
      Juan Pérez -
      <a href="https://wa.me/51932818485?text=¡Hola!%20Tu%20evaluación%20será%20el%20día%2020%20a%20las%2013:00pm" target="_blank">
        Enviar WhatsApp
      </a>
    </li>
    <li>
      María Gómez -
      <a href="https://wa.me/51912345678?text=Hola%20María,%20tengo%20una%20consulta%20sobre%20mi%20ticket" target="_blank">
        Enviar WhatsApp
      </a>
    </li>
  </ul>